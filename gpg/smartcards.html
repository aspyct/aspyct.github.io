

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>GPG SmartCard &mdash; aspyct.org</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Nitrokey Storage 2" href="nitrokey.html" />
    <link rel="prev" title="GPG" href="index.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Aspyct.org
          

          
          </a>

          
            
            
              <div class="version">
                9.35
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../debian/index.html">Debian 9.6</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">GPG</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">GPG SmartCard</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#verify-that-a-card-is-detected">Verify that a card is detected</a></li>
<li class="toctree-l3"><a class="reference internal" href="#change-the-user-and-admin-pin-code">Change the user and admin PIN code</a></li>
<li class="toctree-l3"><a class="reference internal" href="#generate-a-private-key-on-the-card">Generate a private key on the card</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="nitrokey.html">Nitrokey Storage 2</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../openwrt/index.html">OpenWRT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../networking/index.html">Networking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cisco/index.html">Cisco</a></li>
<li class="toctree-l1"><a class="reference internal" href="../other/index.html">Other</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Aspyct.org</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">GPG</a> &raquo;</li>
        
      <li>GPG SmartCard</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="gpg-smartcard">
<h1>GPG SmartCard<a class="headerlink" href="#gpg-smartcard" title="Permalink to this headline">¶</a></h1>
<p>The commands below have been tested with gpg (GnuPG) 2.1.18 and a smartcard v3.3.</p>
<div class="section" id="verify-that-a-card-is-detected">
<h2>Verify that a card is detected<a class="headerlink" href="#verify-that-a-card-is-detected" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ gpg --card-status
</pre></div>
</div>
<p>This command will output a card status. If a “No such device” message appears,
then something is wrong with your system.</p>
</div>
<div class="section" id="change-the-user-and-admin-pin-code">
<h2>Change the user and admin PIN code<a class="headerlink" href="#change-the-user-and-admin-pin-code" title="Permalink to this headline">¶</a></h2>
<p>This is the output when using a card reader with a physical pin pad.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ gpg --change-pin
gpg: OpenPGP card no. D2760001240103030005000067A80000 detected

1 - change PIN
2 - unblock PIN
3 - change Admin PIN
4 - set the Reset Code
Q - quit

Your selection? 1
PIN changed.
</pre></div>
</div>
</div>
<div class="section" id="generate-a-private-key-on-the-card">
<h2>Generate a private key on the card<a class="headerlink" href="#generate-a-private-key-on-the-card" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ gpg --edit-card

Reader ...........: ...
Application ID ...: ...
Version ..........: 3.3
Manufacturer .....: ...
Serial number ....: ...
Name of cardholder: [not set]
Language prefs ...: de
Sex ..............: unspecified
URL of public key : [not set]
Login data .......: [not set]
Signature PIN ....: forced
Key attributes ...: rsa2048 rsa2048 rsa2048
Max. PIN lengths .: 64 64 64
PIN retry counter : 3 0 3
Signature counter : 0
Signature key ....: [none]
Encryption key....: [none]
Authentication key: [none]
General key info..: [none]

gpg/card&gt; admin
Admin commands are allowed

gpg/card&gt; name
Cardholder&#39;s surname: &lt;your surname&gt;
Cardholder&#39;s given name: &lt;your first name&gt;

gpg/card&gt; generate
Make off-card backup of encryption key? (Y/n) n
What keysize do you want for the Signature key? (2048) 4096
The card will now be re-configured to generate a key of 4096 bits
Note: There is no guarantee that the card supports the requested size.
    If the key generation does not succeed, please check the
    documentation of your card to see what sizes are allowed.
What keysize do you want for the Encryption key? (2048) 4096
The card will now be re-configured to generate a key of 4096 bits
What keysize do you want for the Authentication key? (2048) 4096
The card will now be re-configured to generate a key of 4096 bits
Please specify how long the key should be valid.
        0 = key does not expire
    &lt;n&gt;  = key expires in n days
    &lt;n&gt;w = key expires in n weeks
    &lt;n&gt;m = key expires in n months
    &lt;n&gt;y = key expires in n years
Key is valid for? (0) 1y
Key expires at Thu 09 Jan 2020 07:54:41 PM CET
Is this correct? (y/N) y

GnuPG needs to construct a user ID to identify your key.

Real name: &lt;your name&gt;
Email address: &lt;your email&gt;
Comment:
You selected this USER-ID:
    &quot;&lt;your name&gt; &lt;your email&gt;&quot;

Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? o
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="nitrokey.html" class="btn btn-neutral float-right" title="Nitrokey Storage 2" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="GPG" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Antoine d&#39;Otreppe

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../',
              VERSION:'9.35',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>